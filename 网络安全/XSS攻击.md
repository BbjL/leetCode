##### 什么是XSS攻击
XSS (Cross-Site Scripting) 跨站脚本攻击，是一种代码注入攻击，攻击者通过在目标网闸上注入恶意脚本，使之在用户浏览器上运行。利用这些恶意脚本，攻击者可获取用户的敏感信息如 Cookie、SessionID 等，进而危害数据安全。

##### XSS攻击的类型
1. 反射性
特点：将攻击代码保存在url中
  > 1.攻击者构造出特殊的 URL，其中包含恶意代码。
2.用户打开带有恶意代码的 URL 时，网站**服务端**将恶意代码从 URL 中取出，拼接在 HTML 中返回给浏览器。
3.用户浏览器接收到响应后解析执行，混在其中的恶意代码也被执行。
4.恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户的行为，调用目标网站接口执行攻击者指定的操作。

2. 存储型
特点：将攻击代码存储在数据库中
> 1.攻击者将恶意代码提交到目标网站的数据库中。
用户打开目标网站时，网站服务端将恶意代码从数据库取出，拼接在 HTML 中返回给浏览器。
2.用户浏览器接收到响应后解析执行，混在其中的恶意代码也被执行。
3.恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户的行为，调用目标网站接口执行攻击者指定的操作。
常见的攻击位置：如论坛发帖、商品评论、用户私信等。


3. DOM型
> 1.攻击者构造出特殊的 URL，其中包含恶意代码。
2.用户打开带有恶意代码的 URL。
3.用户浏览器接收到响应后解析执行，前端 JavaScript 取出 URL 中的恶意代码并执行。
4.恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户的行为，调用目标网站接口执行攻击者指定的操作


##### XSS攻击预防
1. 在恶意代码提交的时候
  > 如果对存入数据库的数据进行转移处理，由于不明确数据未来用在什么地方，如 5 < 6这些数据，如果在存入数据库时对他进行转移，在调出数据库使用这些代码时将会出现乱码的现象
2. 在浏览器执行的时候
  - 使用纯前端方式进行渲染,不用服务器端拼接html后返回
    > 由浏览器加载静态网页，通过ajax获取数据，通过innerText表明数据是文本插入到html中，同时前端也需要注意DOM型XSS攻击，如onload 和 href等在JS中的执行
  - 对插入HTML中的代码进行转义
    > 服务端对插入数据进行转移拼接后返回
  - 使用 CSP ，CSP 的本质是建立一个白名单，告诉浏览器哪些外部资源可以加载和执行，从而防止恶意代码的注入攻击。

##### 什么是CSP
CSP 指的是内容安全策略，它的本质是建立一个白名单，告诉浏览器哪些外部资源可以加载和执行。我们只需要配置规则，如何拦截由浏览器自己来实现。

##### CSP如何使用
1. 一种是设置 HTTP 首部中的 Content-Security-Policy
2. 设置 meta 标签的方式 
```javascript
<meta http-equiv="Content-Security-Policy">
```